@page "/"
@using RaceManager.Language
@inject AuthenticationStateProvider AuthState
@attribute [Authorize]
<link rel="icon" type="image/png" href="~/favicon.ico" sizes="32x32">

<PageTitle>Race Manager</PageTitle>

<h1 style="padding-bottom: 6%">Welcome to the SRSP-Race-Manager.</h1>

<h3 style="padding-bottom: 40px">
    <img style="padding-right:20px" src="@Picture">
    You're currently logged with @Username .
</h3>
<p>
    This project is part of the Sailing Race Simulation Platform and is actively developed under <a href="https://github.com/Le-clan-des-Semi-Croustillant/">github</a>.
</p>
<p>
    You can find this project and its documentation through the <a href="https://lcsc.tk">portal</a>.
</p>
<p>
    If you have any trouble please check the <a href="https://le-clan-des-semi-croustillant.github.io/SRSP-Race-Manager/">documentation</a>.
</p>
<p style="position:absolute;bottom: 1%">
    Authors : Jérémie Rodez, Karim Moussaoui, Dany Neang, Mikael Allanos, Fabien Perot
</p>

@code {
    private string Username = "Anonymous User";
    private string Picture = "";

    protected override async Task OnInitializedAsync()
    {
        var state = await AuthState.GetAuthenticationStateAsync();

        Username = state.User.Identity.Name ?? string.Empty;

        Picture = state.User.Claims
                    .Where(c => c.Type.Equals("picture"))
                    .Select(c => c.Value)
                    .FirstOrDefault() ?? string.Empty;

        await base.OnInitializedAsync();
    }
}